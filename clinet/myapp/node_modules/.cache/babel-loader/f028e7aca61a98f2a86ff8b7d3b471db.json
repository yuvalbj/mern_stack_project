{"ast":null,"code":"import axios from 'axios';\n\nconst getAllSubscription = () => {\n  return axios.get(\"http://localhost:8000/api/subscriptions\");\n};\n\nconst getSub = id => {\n  return axios.get(\"http://localhost:8000/api/subscriptions/\" + id);\n};\n\nconst addSub = newSub => {\n  return axios.post(\"http://localhost:8000/api/subscriptions\", newSub);\n};\n\nconst getSubsPerMovieID = async (id) => {\n  let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n  let allSubs = resp.data;\n  let result = [];\n  let resp1 = await axios.get(\"http://localhost:8000/api/members\");\n  let allMembers = resp1.data;\n  allSubs.forEach(sub => {\n    if (sub.movie_id === id) {\n      allMembers.forEach(mem => {\n        if (mem._id === sub.member_id) {\n          let obj = {\n            id: sub._id,\n            date: sub.date,\n            memId: mem._id,\n            memName: mem.name\n          };\n          result.push(obj);\n        }\n      });\n    }\n  });\n  return result;\n};\n\nconst getSubsPerMemberID = async (id) => {\n  let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n  let allSubs = resp.data;\n  let result = [];\n  let resp1 = await axios.get(\"http://localhost:8000/api/movies\");\n  let allMovies = resp1.data;\n  allSubs.forEach(sub => {\n    if (sub.member_id === id) {\n      allMovies.forEach(mov => {\n        if (mov._id === sub.movie_id) {\n          let obj = {\n            id: sub._id,\n            date: sub.date,\n            movId: mov._id,\n            movName: mov.name\n          };\n          result.push(obj);\n        }\n      });\n    }\n  });\n  return result;\n};\n\nconst deleteSubPerMovie = async (id) => {\n  let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n  let allSubs = resp.data;\n  allSubs.forEach(sub => {\n    if (sub.movie_id === id) {\n      axios.delete(\"http://localhost:8000/api/subscriptions/\" + sub._id).then(x => console.log(x));\n    }\n  });\n  return \"Deleted\";\n};\n\nexport default {\n  getAllSubscription,\n  getSubsPerMovieID,\n  getSubsPerMemberID,\n  deleteSubPerMovie\n};","map":{"version":3,"sources":["/Users/fundguard/Desktop/Full stack course/HW/Projects/React/clinet/myapp/src/subscriptions/subscriptionUtils.js"],"names":["axios","getAllSubscription","get","getSub","id","addSub","newSub","post","getSubsPerMovieID","resp","allSubs","data","result","resp1","allMembers","forEach","sub","movie_id","mem","_id","member_id","obj","date","memId","memName","name","push","getSubsPerMemberID","allMovies","mov","movId","movName","deleteSubPerMovie","delete","then","x","console","log"],"mappings":"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","sourcesContent":["\nimport axios from 'axios';\n\nconst getAllSubscription = ()=> \n{\n    return axios.get(\"http://localhost:8000/api/subscriptions\");\n}\n\nconst getSub = (id)=> \n{\n    return axios.get(\"http://localhost:8000/api/subscriptions/\" + id);\n}\n\n\nconst addSub = (newSub)=> \n{\n    return axios.post(\"http://localhost:8000/api/subscriptions\" , newSub);\n\n}\n\n\nconst getSubsPerMovieID = async (id) =>\n  {\n    let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n    let allSubs = resp.data;\n    let result = [];\n\n    let resp1 = await axios.get(\"http://localhost:8000/api/members\");\n    let allMembers = resp1.data;\n\n    allSubs.forEach(sub => \n      {\n        if(sub.movie_id === id)\n        {\n\n           allMembers.forEach(mem => \n            {\n              if(mem._id === sub.member_id)\n              {\n                  let obj = { id: sub._id , date : sub.date ,memId : mem._id, memName: mem.name}\n                  result.push(obj);\n              }\n            })\n        }\n      })\n     return result;\n    }\n\n\n  \nconst getSubsPerMemberID = async (id) =>\n{\n  let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n  let allSubs = resp.data;\n  let result = [];\n\n  let resp1 = await axios.get(\"http://localhost:8000/api/movies\");\n  let allMovies = resp1.data;\n\n  allSubs.forEach(sub => \n    {\n      if(sub.member_id === id)\n      {\n\n        allMovies.forEach(mov => \n          {\n            if(mov._id === sub.movie_id)\n            {\n                let obj = { id: sub._id , date : sub.date , movId : mov._id, movName: mov.name}\n                result.push(obj);\n            }\n          })\n      }\n    })\n   return result;\n  }\n\n\n  const deleteSubPerMovie = async (id) =>\n  {\n    let resp = await axios.get(\"http://localhost:8000/api/subscriptions\");\n    let allSubs = resp.data;\n    \n    allSubs.forEach(sub => \n      {\n        if(sub.movie_id === id)\n        {\n\n          axios.delete(\"http://localhost:8000/api/subscriptions/\" + sub._id).then(x => console.log(x))\n        }\n      })\n\n     return \"Deleted\";\n    }\n\n\nexport default {getAllSubscription, getSubsPerMovieID , getSubsPerMemberID, deleteSubPerMovie};\n"]},"metadata":{},"sourceType":"module"}